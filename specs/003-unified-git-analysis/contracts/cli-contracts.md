# CLI Contracts: Unified Git Analysis and Verification

**Feature**: `003-unified-git-analysis`
**Date**: 2025-11-11

This document defines the command-line interface for the `git-verifier` tool.

## Command: `git-verifier`

The main entry point for the unified tool.

### Sub-command: `analyze`

Analyzes commit history to generate a synthesized narrative or a full Intent Report.

**Usage**:
```bash
git-verifier analyze [OPTIONS] [REVISION_RANGE]
```

**Arguments**:

- `[REVISION_RANGE]` (optional): The commit or range of commits to analyze (e.g., `HEAD~5..HEAD`, a branch name). Defaults to the last 10 commits on the current branch.

**Options**:

- `--report`: If specified, generates a full `IntentReport` for the entire branch, not just individual commit narratives.
- `--output-file <PATH>`: Path to save the output (JSON format). If not provided, prints to standard output.
- `--repo-path <PATH>`: Path to the Git repository. Defaults to the current working directory.

### Sub-command: `detect-rebased`

Detects local branches that have been rebased and may require verification.

**Usage**:
```bash
git-verifier detect-rebased [OPTIONS]
```

**Options**:

- `--since <DATE>`: Only show branches rebased since a certain date.
- `--json`: Output the list of branches in JSON format.

### Sub-command: `verify`

Verifies a merged branch against a pre-merge Intent Report.

**Usage**:
```bash
git-verifier verify --report <INTENT_REPORT_PATH> --merged-branch <BRANCH_NAME> [OPTIONS]
```

**Required Options**:

- `--report <INTENT_REPORT_PATH>`: Path to the JSON `IntentReport` file generated by the `analyze --report` command before the merge.
- `--merged-branch <BRANCH_NAME>`: The name of the branch into which the feature was merged (e.g., `main`).

**Options**:

- `--output-file <PATH>`: Path to save the `VerificationResult` (JSON format). If not provided, prints to standard output.
- `--repo-path <PATH>`: Path to the Git repository. Defaults to the current working directory.
