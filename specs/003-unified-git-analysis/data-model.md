# Data Model: Unified Git Analysis and Verification

**Feature**: `003-unified-git-analysis`
**Date**: 2025-11-11

This document outlines the data entities for the unified analysis and verification tool.

## Entity: ActionNarrative

A synthesized description of a single commit's intent and actions. This is the building block for reports.

| Field | Type | Description |
|---|---|---|
| `commit_hexsha` | string | The full SHA-1 hash of the commit. |
| `author_name` | string | The name of the commit author. |
| `authored_date` | datetime | The timestamp when the commit was authored. |
| `commit_message` | string | The original commit message. |
| `synthesized_narrative` | string | A detailed narrative explaining the 'what' and 'why' of the changes, generated by the tool. |
| `is_consistent` | boolean | A flag indicating if the commit message and code changes were found to be consistent. |
| `discrepancy_notes` | string | If `is_consistent` is false, this field contains notes on the identified discrepancies. |

## Entity: IntentReport

A collection of `ActionNarrative` objects for all commits in a branch, representing the total intended change before a merge or rebase.

| Field | Type | Description |
|---|---|---|
| `branch_name` | string | The name of the branch the report was generated for. |
| `generated_at` | datetime | The timestamp when the report was generated. |
| `commit_narratives` | list[ActionNarrative] | An ordered list of narratives for each commit in the branch's history. |

## Entity: VerificationResult

The output of the verification process, indicating consistency or listing discrepancies between an `IntentReport` and the final merged state.

| Field | Type | Description |
|---|---|---|
| `branch_name` | string | The branch that was verified. |
| `verified_at` | datetime | The timestamp of the verification. |
| `is_fully_consistent` | boolean | True if all intended changes from the IntentReport are found in the final merged code. |
| `missing_changes` | list[object] | A list of intended changes from the report that were not found in the final code. Each object could detail the commit and specific change that is missing. |
| `unexpected_changes` | list[object] | A list of changes found in the final code that were not part of the original IntentReport. |

## Relationships

- An `IntentReport` contains a one-to-many relationship with `ActionNarrative`.
- A `VerificationResult` is generated by comparing an `IntentReport` against a merged branch state.
