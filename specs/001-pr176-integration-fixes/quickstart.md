# Quickstart: Generic PR Integration Fixes

**Feature**: PR Integration Fixes
**Branch**: `001-pr176-integration-fixes`
**Date**: 2025-11-26
**Generated by**: `/speckit.plan` command

## Overview

This quickstart guide provides immediate instructions for using the generic PR integration fixes feature. The feature accepts an arbitrary PR number as input and performs integration tasks using GitHub CLI commands.

## Prerequisites

1. Install GitHub CLI (`gh` command)
2. Authenticate with GitHub: `gh auth login`
3. Ensure you have appropriate permissions for the PR
4. Have Python 3.11+ installed

## Quick Start

### 1. Basic Usage

```bash
# Accept PR number as input
PR_NUMBER=<your_pr_number>

# Run basic PR integration tasks
gh pr view $PR_NUMBER
gh pr diff $PR_NUMBER
gh pr comment list $PR_NUMBER
```

### 2. Parameterized Commands

All commands should accept the PR number as a parameter:

```bash
# View PR details
gh pr view [PR_NUMBER]

# Get PR diff for conflict analysis  
gh pr diff [PR_NUMBER]

# List comments to resolve
gh pr comment list [PR_NUMBER]

# Check related issues
gh issue list --pull-request [PR_NUMBER]
```

### 3. Integration Validation

```bash
# Validate PR number format
if [[ $PR_NUMBER =~ ^[0-9]+$ ]]; then
    echo "Valid PR number: $PR_NUMBER"
else
    echo "Invalid PR number format"
    exit 1
fi

# Check if PR exists
if gh pr view $PR_NUMBER --json state > /dev/null 2>&1; then
    echo "PR $PR_NUMBER exists"
else
    echo "PR $PR_NUMBER does not exist or is inaccessible"
    exit 1
fi
```

### 4. Example Script

Here's a minimal script that demonstrates the parameterization:

```bash
#!/bin/bash

# Script: integrate_pr.sh
# Purpose: Integrate a specified PR using GitHub CLI

PR_NUMBER=$1

if [ -z "$PR_NUMBER" ]; then
    echo "Usage: $0 <PR_NUMBER>"
    exit 1
fi

# Validate input
if ! [[ "$PR_NUMBER" =~ ^[0-9]+$ ]]; then
    echo "Error: PR number must be a positive integer"
    exit 1
fi

echo "Starting integration for PR #$PR_NUMBER"

# Fetch PR details
echo "Fetching PR details..."
PR_DETAILS=$(gh pr view $PR_NUMBER --json title,state,mergeable,author)

# Check if PR is mergeable
MERGEABLE=$(echo $PR_DETAILS | jq -r '.mergeable')
if [ "$MERGEABLE" = "CONFLICTING" ]; then
    echo "Warning: PR has merge conflicts"
else
    echo "PR appears mergeable"
fi

# List comments for resolution
echo "Comments to resolve:"
gh pr comment list $PR_NUMBER --json body,author,state | jq -r '.[] | "Author: \(.author.login) | State: \(.state) | Comment: \(.body)"'

echo "Integration overview complete for PR #$PR_NUMBER"
```

## Configuration

The system can be configured using environment variables:

- `PR_NUMBER`: The PR to work on (required)
- `TARGET_BRANCH`: Target branch for integration (default: main)
- `GH_TOKEN`: GitHub token for API access (if needed)

## Common Tasks

### 1. Check PR Status
```bash
gh pr view [PR_NUMBER] --json state,title,mergeable
```

### 2. Get Changes
```bash
gh pr diff [PR_NUMBER] --name-only
```

### 3. Check Reviews
```bash
gh pr view [PR_NUMBER] --json reviews
```

### 4. List Files
```bash
gh pr view [PR_NUMBER] --json files
```

## Error Handling

- Invalid PR numbers: Validate format with regex `^[0-9]+$`
- Unauthorized access: Ensure proper GitHub authentication
- Network errors: Retry with exponential backoff
- API limits: Implement rate limiting

## Automation Framework

The system supports both interactive and automated modes:

### Configuration File Example

```bash
# config.json
{
  "prNumber": 123,
  "targetBranch": "main",
  "automationLevel": "full-automation",
  "notifications": {
    "console": true,
    "logFile": "./pr_integration.log",
    "email": null
  },
  "auth": {
    "method": "gh-cli"
  },
  "loggingLevel": "info",
  "maxConcurrentPRs": 1
}
```

### Running in Automation Mode

```bash
# Run with configuration file
python -m automation.run --config config.json

# Run with command-line parameters
python -m automation.run --pr-number 123 --automation-level full-automation --logging-level info

# Dry-run mode to preview changes
python -m automation.run --pr-number 123 --automation-level dry-run
```

## Next Steps

1. Complete detailed planning in plan.md
2. Define contracts in contracts/ directory  
3. Break down implementation tasks in tasks.md
4. Review data models in data-model.md

This quickstart provides the foundation for implementing the parameterized PR integration system with arbitrary PR number support and automation capabilities.