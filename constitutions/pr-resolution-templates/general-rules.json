{
  "name": "General Constitutional Rules",
  "version": "1.0.0",
  "description": "General constitutional rules applicable across all Spec Kit phases",
  "rules": [
    {
      "id": "worktree_isolation_required",
      "name": "Worktree Isolation Required",
      "description": "All resolution activities must use worktree-based isolation",
      "category": "safety",
      "violation_type": "critical",
      "rule_pattern": "\"worktree_isolation\":\\s*true",
      "severity_score": 0.9,
      "auto_fixable": false,
      "remediation_guide": "Enable worktree isolation for all resolution operations to prevent repository corruption",
      "examples": [
        "\"worktree_isolation\": true",
        "\"isolation_method\": \"git_worktree\""
      ],
      "dependencies": [],
      "phase_applications": ["all"]
    },
    {
      "id": "no_direct_branch_manipulation",
      "name": "No Direct Branch Manipulation",
      "description": "Primary repository branches must not be directly manipulated",
      "category": "safety",
      "violation_type": "critical",
      "rule_pattern": "\"direct_branch_access\":\\s*false",
      "severity_score": 0.9,
      "auto_fixable": false,
      "remediation_guide": "Use worktrees instead of direct branch manipulation to maintain repository integrity",
      "examples": [
        "\"direct_branch_access\": false",
        "\"branch_policy\": \"read_only_primary_branches\""
      ],
      "dependencies": ["worktree_isolation_required"],
      "phase_applications": ["all"]
    },
    {
      "id": "constitutional_compliance_blocks_execution",
      "name": "Constitutional Compliance Blocks Critical Violations",
      "description": "Critical constitutional violations must block execution",
      "category": "governance",
      "violation_type": "critical",
      "rule_pattern": "\"blocking_violations\":\\s*\\[.*\"critical\".*\\]",
      "severity_score": 0.9,
      "auto_fixable": false,
      "remediation_guide": "Configure constitutional engine to block execution on critical violations",
      "examples": [
        "\"blocking_violations\": [\"critical\"], \"execution_policy\": \"block_on_critical\"",
        "\"violation_policy\": {\"critical\": \"block\", \"major\": \"warn\", \"minor\": \"info\"}"
      ],
      "dependencies": [],
      "phase_applications": ["all"]
    },
    {
      "id": "rollback_mechanisms_required",
      "name": "Rollback Mechanisms Required",
      "description": "All operations must include rollback mechanisms",
      "category": "safety",
      "violation_type": "critical",
      "rule_pattern": "\"rollback_mechanisms\":\\s*{",
      "severity_score": 0.9,
      "auto_fixable": false,
      "remediation_guide": "Implement comprehensive rollback mechanisms for all operations",
      "examples": [
        "\"rollback_mechanisms\": {\"worktree_deletion\": true, \"database_rollback\": true, \"state_restoration\": true}",
        "\"rollback_strategy\": \"git_reset_with_backup\""
      ],
      "dependencies": ["worktree_isolation_required"],
      "phase_applications": ["all"]
    },
    {
      "id": "test_first_approach",
      "name": "Test-First Development Approach",
      "description": "Implementation must follow test-first development methodology",
      "category": "quality",
      "violation_type": "major",
      "rule_pattern": "\"test_first\":\\s*true",
      "severity_score": 0.8,
      "auto_fixable": false,
      "remediation_guide": "Implement test-first development with unit tests, integration tests, and validation",
      "examples": [
        "\"test_first\": true, \"test_coverage_target\": 0.9",
        "\"testing_approach\": \"TDD_with_validation_gates\""
      ],
      "dependencies": [],
      "phase_applications": ["all"]
    },
    {
      "id": "human_in_the_loop_validation",
      "name": "Human-in-the-Loop Validation",
      "description": "Critical operations must include human validation checkpoints",
      "category": "governance",
      "violation_type": "major",
      "rule_pattern": "\"human_validation\":\\s*{",
      "severity_score": 0.7,
      "auto_fixable": false,
      "remediation_guide": "Add human validation checkpoints for critical operations and high-risk activities",
      "examples": [
        "\"human_validation\": {\"critical_operations\": true, \"high_risk_activities\": true}",
        "\"validation_checkpoints\": [\"pre_execution\", \"post_implementation\", \"pre_production\"]"
      ],
      "dependencies": [],
      "phase_applications": ["all"]
    },
    {
      "id": "performance_targets_defined",
      "name": "Performance Targets Defined",
      "description": "All phases must include defined performance targets",
      "category": "performance",
      "violation_type": "major",
      "rule_pattern": "\"performance_targets\":\\s*{",
      "severity_score": 0.7,
      "auto_fixable": false,
      "remediation_guide": "Define performance targets for execution time, resource usage, and quality metrics",
      "examples": [
        "\"performance_targets\": {\"execution_time\": \"< 5min\", \"memory_usage\": \"< 2GB\", \"quality_score\": \"> 0.8\"}",
        "\"performance_benchmarks\": [\"spec_creation\", \"strategy_generation\", \"validation\"]"
      ],
      "dependencies": [],
      "phase_applications": ["all"]
    },
    {
      "id": "monitoring_and_logging",
      "name": "Monitoring and Logging Enabled",
      "description": "All operations must include monitoring and logging",
      "category": "observability",
      "violation_type": "major",
      "rule_pattern": "\"monitoring\":\\s*{",
      "severity_score": 0.7,
      "auto_fixable": false,
      "remediation_guide": "Enable monitoring and logging for observability and debugging",
      "examples": [
        "\"monitoring\": {\"structured_logging\": true, \"metrics_collection\": true, \"alerting\": true}",
        "\"observability\": {\"log_level\": \"INFO\", \"performance_tracking\": true, \"error_reporting\": true}"
      ],
      "dependencies": [],
      "phase_applications": ["all"]
    },
    {
      "id": "documentation_requirements",
      "name": "Documentation Requirements",
      "description": "All work must include proper documentation",
      "category": "documentation",
      "violation_type": "major",
      "rule_pattern": "\"documentation_required\":\\s*true",
      "severity_score": 0.6,
      "auto_fixable": false,
      "remediation_guide": "Ensure all specifications, strategies, and procedures are properly documented",
      "examples": [
        "\"documentation_required\": true, \"doc_types\": [\"specification\", \"strategy\", \"procedure\"]",
        "\"documentation_standards\": {\"format\": \"markdown\", \"completeness\": \"comprehensive\"}"
      ],
      "dependencies": [],
      "phase_applications": ["all"]
    },
    {
      "id": "parallel_execution_coordination",
      "name": "Parallel Execution Coordination",
      "description": "Parallel operations must include proper coordination mechanisms",
      "category": "coordination",
      "violation_type": "major",
      "rule_pattern": "\"parallel_coordination\":\\s*{",
      "severity_score": 0.7,
      "auto_fixable": false,
      "remediation_guide": "Implement coordination mechanisms for parallel operations",
      "examples": [
        "\"parallel_coordination\": {\"task_coordination\": \"worktree_based\", \"sync_barriers\": [\"constitutional_check\"]}",
        "\"parallel_execution\": {\"max_concurrent\": 4, \"resource_isolation\": true}"
      ],
      "dependencies": [],
      "phase_applications": ["all"]
    },
    {
      "id": "constitutional_scoring_integration",
      "name": "Constitutional Scoring Integration",
      "description": "All workflows must integrate constitutional scoring",
      "category": "constitutional",
      "violation_type": "major",
      "rule_pattern": "\"constitutional_scoring\":\\s*{",
      "severity_score": 0.8,
      "auto_fixable": false,
      "remediation_guide": "Integrate constitutional scoring throughout the workflow for compliance measurement",
      "examples": [
        "\"constitutional_scoring\": {\"enabled\": true, \"weighting\": {\"spec\": 0.25, \"strategy\": 0.5, \"execution\": 0.25}}",
        "\"scoring_integration\": {\"real_time\": true, \"blocking_threshold\": 0.7}"
      ],
      "dependencies": [],
      "phase_applications": ["all"]
    },
    {
      "id": "security_considerations",
      "name": "Security Considerations",
      "description": "All operations must consider security implications",
      "category": "security",
      "violation_type": "major",
      "rule_pattern": "\"security_considerations\":\\s*\\[",
      "severity_score": 0.8,
      "auto_fixable": false,
      "remediation_guide": "Include security considerations for all operations and data handling",
      "examples": [
        "\"security_considerations\": [\"data_encryption\", \"access_control\", \"audit_logging\"]",
        "\"security_policy\": {\"data_handling\": \"encrypted\", \"access\": \"authenticated\", \"audit\": \"comprehensive\"}"
      ],
      "dependencies": [],
      "phase_applications": ["all"]
    },
    {
      "id": "error_recovery_procedures",
      "name": "Error Recovery Procedures",
      "description": "All operations must include error recovery procedures",
      "category": "safety",
      "violation_type": "major",
      "rule_pattern": "\"error_recovery\":\\s*{",
      "severity_score": 0.8,
      "auto_fixable": false,
      "remediation_guide": "Implement comprehensive error recovery procedures with multiple fallback levels",
      "examples": [
        "\"error_recovery\": {\"retry_policy\": \"exponential_backoff\", \"fallback_strategies\": [\"manual\", \"automated\"], \"escalation\": \"alert_team\"}",
        "\"recovery_procedures\": {\"graceful_degradation\": true, \"partial_rollback\": true, \"full_rollback\": true}"
      ],
      "dependencies": ["rollback_mechanisms_required"],
      "phase_applications": ["all"]
    },
    {
      "id": "compliance_audit_trail",
      "name": "Compliance Audit Trail",
      "description": "All activities must maintain compliance audit trail",
      "category": "governance",
      "violation_type": "warning",
      "rule_pattern": "\"audit_trail\":\\s*{",
      "severity_score": 0.5,
      "auto_fixable": true,
      "remediation_guide": "Maintain comprehensive audit trail of all activities and decisions",
      "examples": [
        "\"audit_trail\": {\"activity_logging\": true, \"decision_recording\": true, \"compliance_tracking\": true}",
        "\"compliance_audit\": {\"comprehensive_logging\": true, \"version_control\": true, \"change_tracking\": true}"
      ],
      "dependencies": ["monitoring_and_logging"],
      "phase_applications": ["all"]
    },
    {
      "id": "quality_gates_integration",
      "name": "Quality Gates Integration",
      "description": "All phases must integrate quality gates for validation",
      "category": "quality",
      "violation_type": "major",
      "rule_pattern": "\"quality_gates\":\\s*\\[",
      "severity_score": 0.7,
      "auto_fixable": false,
      "remediation_guide": "Implement quality gates throughout the workflow for validation checkpoints",
      "examples": [
        "\"quality_gates\": [\"constitutional_compliance\", \"test_coverage\", \"performance_validation\", \"security_check\"]",
        "\"gate_validation\": {\"pre_implementation\": true, \"post_implementation\": true, \"pre_deployment\": true}"
      ],
      "dependencies": ["test_first_approach"],
      "phase_applications": ["all"]
    },
    {
      "id": "task_master_integration",
      "name": "Task Master Integration",
      "description": "Workflows should integrate with Task Master for task management",
      "category": "integration",
      "violation_type": "minor",
      "rule_pattern": "\"task_master_integration\":\\s*true",
      "severity_score": 0.4,
      "auto_fixable": true,
      "remediation_guide": "Integrate with Task Master for enhanced task management and parallel development",
      "examples": [
        "\"task_master_integration\": true, \"parallel_development\": true",
        "\"task_management\": {\"enhanced_tracking\": true, \"dependency_mapping\": true, \"progress_reporting\": true}"
      ],
      "dependencies": ["parallel_execution_coordination"],
      "phase_applications": ["all"]
    }
  ]
}